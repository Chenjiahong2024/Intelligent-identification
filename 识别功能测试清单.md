# 识别功能测试清单

## ✅ 快速测试步骤

### 第一步：准备测试环境
1. ⬜ 在Xcode中打开项目
2. ⬜ 连接真机或使用模拟器
3. ⬜ 打开Xcode底部控制台 (⌘+Shift+Y)
4. ⬜ 点击运行按钮 (⌘+R)

### 第二步：检查模型加载
在App启动时，控制台应该显示类似：
```
🔍 [模型] 开始选择最佳模型...
🍎 [模型] 检查 Apple Intelligence 支持...
❌ [模型] 当前系统不支持 Apple Intelligence
🚀 [模型] 检查 FastVLM 模型...
❌ [模型] FastVLM 模型未添加到项目中
⚠️ [模型] 使用 Vision 默认分类器 (降级方案)
```

**✅ 通过条件**: 看到模型选择的日志，最终确定了使用某个模型
**❌ 失败情况**: 完全没有任何模型相关日志

### 第三步：测试简单物体识别

#### 推荐测试物体（识别率最高）
- ⬜ **咖啡杯/马克杯** (预期: coffee mug, cup)
- ⬜ **键盘** (预期: keyboard, computer keyboard)
- ⬜ **鼠标** (预期: mouse, computer mouse)
- ⬜ **手机** (预期: cellular telephone, mobile phone)
- ⬜ **笔记本电脑** (预期: notebook, laptop)
- ⬜ **书本** (预期: book)
- ⬜ **水瓶** (预期: water bottle, bottle)
- ⬜ **眼镜** (预期: sunglasses, spectacles)

#### 测试步骤
1. ⬜ 点击 "开始识别 / Start Recognition"
2. ⬜ 对准物体拍照
3. ⬜ 查看控制台日志

#### 期望的日志输出
```
🚀 [开始识别] 图片尺寸: (1170.0, 2532.0)
⚠️ [识别] 使用Vision默认分类器
🔍 [Vision默认] 开始分类...
📊 [Vision默认] 识别结果:
  1. coffee mug - 置信度: 85.23%
  2. cup - 置信度: 12.45%
  3. espresso - 置信度: 8.76%
  4. container - 置信度: 5.32%
  5. tableware - 置信度: 3.21%
✅ [识别成功] coffee mug (置信度: 85.23%)
✅ [识别完成] 结果: coffee mug
```

**✅ 通过条件**: 
- 看到 "📊 识别结果:" 列表
- 看到 "✅ [识别成功]" 
- App界面显示识别结果（不是"Unknown Object"）

**❌ 失败情况**:
- 只看到 "⚠️ [识别完成] 无法识别物体"
- App显示 "Unknown Object"
- 所有置信度都低于5%

### 第四步：检查语音功能
1. ⬜ 在识别结果页面，点击播放按钮
2. ⬜ 检查是否有语音播报

**✅ 通过条件**: 听到语音朗读物体名称
**❌ 失败情况**: 没有声音或报错

## 📊 测试结果评估

### 场景A：完全正常 ✅
- 模型加载成功
- 简单物体能识别
- 置信度 > 50%
- 语音播报正常

**结论**: 系统工作正常！

### 场景B：识别率低 ⚠️
- 模型加载成功
- 简单物体能识别，但置信度只有10%-30%
- 复杂物体显示 "Unknown Object"

**可能原因**:
- 拍照角度不好
- 光线不足
- 物体不在常见类别中

**改进方法**:
- 改善拍照条件
- 添加FastVLM或其他自定义模型

### 场景C：部分识别 ⚠️
- 模型加载成功
- 某些物体能识别，某些不能
- 日志显示识别过程正常

**结论**: 系统正常，但受限于Vision默认分类器的能力

**改进方法**:
- 添加更强大的CoreML模型
- 或集成在线识别API

### 场景D：完全不识别 ❌
- 所有物体都显示 "Unknown Object"
- 日志显示 "没有足够置信度的结果"
- 即使是明显的常见物体也无法识别

**可能原因**:
1. 相机权限问题
2. 图片质量问题
3. 模型未正确加载

**排查步骤**:
1. 检查系统设置中的相机权限
2. 查看日志中的图片尺寸是否正常
3. 尝试重启App
4. 查看是否有错误日志

### 场景E：模型加载失败 ❌
- 控制台没有模型相关日志
- 或显示模型加载错误

**可能原因**:
- 代码问题
- 系统版本不兼容

**排查步骤**:
1. 检查iOS版本（需要iOS 14+）
2. 清理项目 (⌘+Shift+K)
3. 重新构建 (⌘+B)

## 🎯 真实场景测试

### 场景1：日常物品
测试App在日常使用中的表现

**测试物品**:
- ⬜ 桌上的水杯
- ⬜ 工作用的笔记本电脑
- ⬜ 书架上的书
- ⬜ 桌上的台灯

**评估标准**:
- 正确识别 ≥ 3个: 优秀 ✅
- 正确识别 2个: 良好 ⚠️
- 正确识别 ≤ 1个: 需改进 ❌

### 场景2：学习场景
测试App在语言学习中的实用性

**测试物品**:
- ⬜ 水果（苹果、香蕉）
- ⬜ 文具（笔、橡皮）
- ⬜ 家具（椅子、桌子）
- ⬜ 衣物（T恤、鞋子）

**评估标准**:
- 能识别常见学习词汇: 实用 ✅
- 只能识别部分: 基本可用 ⚠️
- 大部分无法识别: 不适合学习用途 ❌

### 场景3：光线测试
测试不同光线条件下的识别效果

**测试条件**:
- ⬜ 室内自然光
- ⬜ 室内灯光
- ⬜ 室外阳光
- ⬜ 弱光环境

**预期结果**:
- 光线充足时识别率应该更高
- 弱光时可能需要多次尝试

## 📝 测试报告模板

```
测试日期: ___________
iOS版本: ___________
设备型号: ___________
使用模型: ⬜ Vision Default  ⬜ FastVLM  ⬜ Apple Intelligence

### 测试结果

简单物体识别 (8个):
- 成功: _____ 个
- 失败: _____ 个
- 成功率: _____%

日常场景测试:
- 评级: ⬜ 优秀  ⬜ 良好  ⬜ 需改进

学习场景测试:
- 评级: ⬜ 实用  ⬜ 基本可用  ⬜ 不适合

光线影响:
- 充足光线: ⬜ 正常  ⬜ 异常
- 弱光环境: ⬜ 正常  ⬜ 异常

### 问题记录

遇到的问题:
1. _____________________
2. _____________________
3. _____________________

日志截图或关键日志:
```

### 总体评价
⬜ 完全满足需求
⬜ 基本满足需求，需要优化
⬜ 需要重大改进
```

## 🔧 根据测试结果的建议

### 如果测试通过率 > 80%
✅ **系统工作良好！**
- 继续使用Vision默认分类器即可
- 可以添加更多物体类别测试
- 考虑优化UI/UX

### 如果测试通过率 50%-80%
⚠️ **基本可用，建议优化**
- 添加FastVLM模型提高识别率
- 优化拍照指导（添加对焦提示等）
- 针对失败案例改进

### 如果测试通过率 < 50%
❌ **需要重大改进**
- 检查代码是否有bug
- 考虑使用在线识别API
- 训练自定义模型
- 重新评估技术方案

## 🆘 寻求帮助时需要提供的信息

如果需要技术支持，请准备：

1. **测试报告** (使用上面的模板)
2. **完整的控制台日志** (从启动到识别完成)
3. **测试照片** (脱敏后)
4. **设备信息** (型号、iOS版本)
5. **期望行为** vs **实际行为**

示例：
```
期望: 识别咖啡杯
实际: 显示 Unknown Object
日志: 最高置信度只有3.2%
```

