# 项目配置指南

## 重要：在运行前必须完成以下配置

### 1. 添加新文件到Xcode项目

虽然文件已创建在文件系统中，但您需要在Xcode中确认它们被包含在项目中：

1. 打开 Xcode 项目：`Intelligent identification.xcodeproj`
2. 在左侧项目导航器中，右键点击 "Intelligent identification" 文件夹
3. 选择 "Add Files to 'Intelligent identification'..."
4. 选择以下新创建的文件（如果它们还没有出现在项目中）：
   - CameraView.swift
   - ObjectRecognitionService.swift
   - TranslationService.swift
   - SpeechService.swift
   - SettingsView.swift
   - RecognitionResultView.swift
   - Info.plist
5. 确保勾选 "Copy items if needed"
6. 点击 "Add"

### 2. 配置Info.plist权限

确保 Info.plist 文件包含以下权限描述：

```xml
<key>NSCameraUsageDescription</key>
<string>我们需要访问相机来识别物体并帮助您学习语言。We need camera access to recognize objects and help you learn languages.</string>
```

在Xcode中验证：
1. 在项目导航器中选择 Info.plist
2. 检查是否包含 "Privacy - Camera Usage Description"
3. 如果没有，手动添加该键值对

### 3. 配置项目设置

#### 在 Xcode 中：

1. **选择项目目标**
   - 点击项目导航器顶部的项目名称
   - 选择 "Intelligent identification" target

2. **配置 Signing & Capabilities**
   - 点击 "Signing & Capabilities" 标签
   - 勾选 "Automatically manage signing"
   - 选择您的 Team（需要有Apple Developer账号）
   - Bundle Identifier会自动生成

3. **配置 Info 标签**
   - 点击 "Info" 标签
   - 确认 "Custom iOS Target Properties" 中包含相机权限

4. **配置最低系统版本**
   - 在 "General" 标签中
   - 设置 "Minimum Deployments" 为 iOS 15.0 或更高

### 4. 添加框架依赖

以下框架应该已经包含在项目中，请验证：

在 "Build Phases" → "Link Binary With Libraries" 中确认：
- SwiftUI.framework
- AVFoundation.framework
- Vision.framework
- CoreML.framework

如果缺少，点击 "+" 并添加相应框架。

### 5. 构建设置

在 "Build Settings" 中确认：

- **Swift Language Version**: Swift 5
- **iOS Deployment Target**: 15.0 或更高
- **Enable Bitcode**: No (现代Xcode项目默认)

### 6. 运行配置

#### 在真机上运行（推荐）：

1. 使用USB连接您的iPhone
2. 在Xcode顶部选择您的设备
3. 点击 Run 按钮 (⌘R)
4. 首次运行时，需要在iPhone设置中信任开发者证书：
   - 设置 → 通用 → VPN与设备管理 → 开发者应用
   - 点击信任

#### 在模拟器上运行：

1. 选择任意 iPhone 模拟器 (iOS 15.0+)
2. 点击 Run 按钮 (⌘R)

⚠️ **注意**：模拟器无法使用真实相机，但可以测试UI和其他功能。

## 文件结构

```
Intelligent identification/
├── Intelligent_identificationApp.swift  # 应用入口
├── ContentView.swift                     # 主界面
├── CameraView.swift                      # 相机视图
├── SettingsView.swift                    # 设置界面
├── RecognitionResultView.swift           # 结果显示界面
├── ObjectRecognitionService.swift        # 物体识别服务
├── TranslationService.swift              # 翻译服务
├── SpeechService.swift                   # 语音合成服务
├── Info.plist                            # 应用配置和权限
└── Assets.xcassets/                      # 图片资源
```

## 常见问题解决

### 问题1: "Command CodeSign failed with a nonzero exit code"

**解决方案**：
1. 在 Signing & Capabilities 中重新选择 Team
2. 清理构建文件夹：Product → Clean Build Folder (⇧⌘K)
3. 重新构建项目

### 问题2: 文件未出现在项目中

**解决方案**：
1. 关闭 Xcode
2. 在 Finder 中确认文件确实存在
3. 重新打开 Xcode
4. 如果仍未出现，手动添加文件（参考步骤1）

### 问题3: "Cannot find type 'XXX' in scope"

**解决方案**：
1. 确保所有 Swift 文件都已添加到项目
2. 检查文件的 Target Membership（选中文件，查看右侧面板）
3. 确保勾选了 "Intelligent identification" target

### 问题4: 相机权限被拒绝

**解决方案**：
1. 删除应用并重新安装
2. 或者在 iPhone 设置中：
   - 设置 → 隐私与安全性 → 相机
   - 找到应用并允许访问

### 问题5: Vision框架错误

**解决方案**：
1. 确保 Vision.framework 已链接
2. 检查部署目标是否为 iOS 15.0+
3. 清理并重新构建项目

## 测试建议

### 基础功能测试：

1. ✅ 应用启动正常
2. ✅ 主界面显示正确
3. ✅ 设置界面可以打开和保存
4. ✅ 相机权限请求正常
5. ✅ 相机预览显示正常
6. ✅ 拍照功能正常
7. ✅ 物体识别功能正常
8. ✅ 翻译显示正确
9. ✅ 语音播放正常

### 推荐测试物品：

- 📱 手机 (phone)
- 📖 书 (book)
- 🍎 苹果 (apple)
- ☕ 杯子 (cup)
- 💻 电脑 (computer)

## 性能优化建议

1. **相机性能**：
   - 应用会在后台线程处理相机
   - 不会阻塞主线程

2. **识别速度**：
   - Vision框架经过优化
   - 通常识别时间 < 2秒

3. **内存使用**：
   - 拍照后会释放相机资源
   - 建议定期清理缓存

## 下一步

配置完成后，您可以：

1. 运行应用并测试所有功能
2. 根据需要添加更多物品翻译（编辑 TranslationService.swift）
3. 自定义UI颜色和样式
4. 添加更多语言支持
5. 实现额外功能（历史记录、收藏夹等）

## 技术支持

如有问题，请检查：
1. Xcode 版本（建议 14.0+）
2. macOS 版本（建议 Monterey+）
3. iOS 设备系统版本（建议 15.0+）

祝开发顺利！🚀

