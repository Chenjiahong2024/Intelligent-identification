# 功能验证清单 ✅

## 📱 应用完整功能测试清单

使用本清单系统地验证应用的所有功能是否正常工作。

---

## 🎯 核心功能测试

### 1. 应用启动与初始化

- [ ] **应用启动**
  - 应用图标可见
  - 点击图标后 1-2 秒内启动
  - 无崩溃或白屏

- [ ] **主界面显示**
  - 深蓝色渐变背景正常显示
  - 顶部标题"拍照识别 · 即刻开口"清晰可见
  - AI 模型标签显示（Vision Default / FastVLM / Apple Intelligence）
  - 母语和学习语言卡片正确显示
  - "开始识别"按钮可见且可点击

- [ ] **UI 美化效果**
  - 渐变背景流畅
  - 卡片阴影和圆角效果正常
  - 装饰性背景元素（模糊圆圈）可见
  - 字体清晰，颜色对比度好

---

### 2. AI 模型检测与切换

- [ ] **模型优先级验证**
  - 主界面顶部显示当前使用的 AI 模型
  - 在控制台（Console）中查看模型加载日志

- [ ] **Apple Intelligence（iOS 18+）**
  - 如果设备支持且启用，标签显示 "Apple Intelligence"
  - 识别精度应较高

- [ ] **FastVLM 模型**
  - 如果已添加 `FastVLM.mlmodelc` 到项目，标签显示 "FastVLM"
  - 识别速度快

- [ ] **Vision 默认**
  - 如果以上都不可用，标签显示 "Vision Default"
  - 仍能正常识别常见物品

- [ ] **模型切换**
  - 识别完成后，模型标签应保持一致
  - 不会在运行中意外切换模型

---

### 3. 相机功能

- [ ] **权限请求**
  - 首次点击"开始识别"弹出相机权限
  - 提示文字为双语："我们需要访问相机来识别物体并帮助您学习语言。"
  - 点击"允许"后权限生效

- [ ] **相机界面**
  - 相机预览实时流畅
  - 画面无延迟或卡顿
  - 预览占满全屏

- [ ] **相机控制**
  - 底部渐变橙色拍照按钮清晰可见
  - 左上角半透明关闭按钮可见
  - 按钮有阴影和视觉层次感

- [ ] **拍照功能**
  - 点击拍照按钮有按压动画
  - 拍照后自动关闭相机界面
  - 照片成功捕获

- [ ] **关闭功能**
  - 点击左上角"X"按钮
  - 相机界面关闭，返回主界面
  - 相机资源正确释放（无后台占用）

---

### 4. AI 物体识别

- [ ] **识别流程**
  - 拍照后自动进入识别状态
  - 显示"正在识别..."加载动画
  - 加载动画居中，有半透明背景
  - 1-3 秒内完成识别

- [ ] **识别准确性**
  - 测试常见物品：
    - [ ] 手机 (phone) → 识别正确
    - [ ] 书本 (book) → 识别正确
    - [ ] 杯子 (cup) → 识别正确
    - [ ] 键盘 (keyboard) → 识别正确
    - [ ] 苹果 (apple) → 识别正确

- [ ] **识别结果处理**
  - 识别成功后自动打开结果页面
  - 识别失败显示"Unknown"（不崩溃）
  - 连续拍照识别多次无问题

- [ ] **错误处理**
  - 光线太暗时仍能尝试识别
  - 无法识别时优雅降级，不崩溃
  - 控制台有适当的日志输出

---

### 5. 识别结果界面

- [ ] **界面布局**
  - 深色背景渐变正常
  - 所有卡片清晰可见
  - 滚动流畅（如果内容超出屏幕）

- [ ] **拍摄照片卡片**
  - 拍摄的照片清晰显示
  - 图片比例正确，无变形
  - 圆角和边框效果美观

- [ ] **学习语言卡片**
  - 显示正确的学习语言名称（如"中文"）
  - 翻译文本正确（如"苹果"）
  - 橙色渐变背景
  - 播放按钮可见

- [ ] **母语卡片**
  - 显示正确的母语名称（如"English"）
  - 翻译文本正确（如"Apple"）
  - 蓝色渐变背景
  - 播放按钮可见

- [ ] **原始识别结果**
  - 显示 AI 返回的原始英文单词
  - 灰色半透明背景
  - 文本清晰可读

- [ ] **学习提示卡片**
  - 提示文本显示
  - 图标和徽章样式正确
  - 建议内容有帮助

---

### 6. 多语言翻译

- [ ] **预置翻译（35+ 物品）**
  - [ ] 水果类：apple, banana, orange
  - [ ] 日用品：cup, bottle, book, pen
  - [ ] 电子产品：phone, computer, keyboard, mouse
  - [ ] 家具：chair, table, lamp
  - [ ] 其他：bag, shoe, watch, camera

- [ ] **6 种语言支持**
  - [ ] English (英语)
  - [ ] 中文 (Chinese)
  - [ ] Español (西班牙语)
  - [ ] Français (法语)
  - [ ] 日本語 (日语)
  - [ ] 한국어 (韩语)

- [ ] **翻译准确性**
  - 常见物品翻译正确
  - 未知物品显示原始识别结果或"Unknown"
  - 部分匹配也能找到合适翻译

---

### 7. 语音朗读功能

- [ ] **学习语言发音**
  - 点击学习语言卡片的播放按钮
  - 听到正确语言的发音
  - 发音清晰自然

- [ ] **母语发音**
  - 点击母语卡片的播放按钮
  - 听到母语发音
  - 发音准确

- [ ] **播放控制**
  - 播放时按钮图标变为音波图标
  - 播放结束后恢复播放图标
  - 可以重复点击多次播放
  - 按钮有轻微缩放动画

- [ ] **多语言语音**
  - 切换不同学习语言
  - 各语言发音都正常
  - 语速适中，易于理解

---

### 8. 设置功能

- [ ] **设置界面**
  - 点击右上角齿轮图标
  - 设置页面正常打开
  - 深色渐变背景一致

- [ ] **母语选择**
  - 点击语言选择下拉菜单
  - 显示 6 种语言选项
  - 选择后立即生效
  - 当前选择有 ✓ 标记

- [ ] **学习语言选择**
  - 可以选择任意支持的语言
  - 与母语可以不同
  - 选择后主界面更新

- [ ] **设置持久化**
  - 更改设置后关闭应用
  - 重新打开应用
  - 设置仍然保留

- [ ] **信息卡片**
  - "关于"卡片正确显示应用介绍
  - "使用说明"卡片有 3 个步骤
  - 版本号显示正确（Version 1.0.0）

---

### 9. 用户体验

- [ ] **导航流畅性**
  - 主界面 ↔ 相机界面转换流畅
  - 结果页面打开和关闭自然
  - 设置页面切换无卡顿

- [ ] **按钮反馈**
  - 所有按钮点击有视觉反馈（缩放/高亮）
  - "开始识别"按钮有按压动画
  - 播放按钮有状态切换

- [ ] **加载状态**
  - 识别时有清晰的加载指示
  - 加载动画流畅
  - 双语提示文本

- [ ] **错误处理**
  - 识别失败时不崩溃
  - 显示"Unknown"而不是空白
  - 用户仍可继续使用

---

### 10. 性能测试

- [ ] **启动性能**
  - 冷启动时间 < 2 秒
  - 热启动时间 < 1 秒
  - 无明显延迟

- [ ] **识别性能**
  - 单次识别 1-3 秒
  - 连续识别 5 次无明显变慢
  - 内存使用稳定（< 100MB）

- [ ] **相机性能**
  - 预览帧率流畅（30fps+）
  - 拍照响应快速（< 0.5 秒）
  - 关闭相机后资源释放

- [ ] **内存管理**
  - 连续使用 10 分钟无内存泄漏
  - 退到后台后内存正常释放
  - 从后台返回前台功能正常

---

### 11. 边界情况测试

- [ ] **弱光环境**
  - 识别可能失败但不崩溃
  - 有适当的错误提示

- [ ] **复杂背景**
  - 识别准确度可能降低
  - 仍能返回结果

- [ ] **快速连续拍照**
  - 快速拍 3-5 张
  - 每次识别都独立完成
  - 无界面错乱

- [ ] **语言边界情况**
  - 母语和学习语言相同时
  - 两个卡片都能正常显示
  - 发音都正常播放

- [ ] **未知物品**
  - 拍摄不常见的物品
  - 显示原始识别结果或"Unknown"
  - 仍可播放发音（如果有翻译）

---

### 12. 多设备测试

- [ ] **不同屏幕尺寸**
  - iPhone SE (小屏)：布局正常，无截断
  - iPhone 15 Pro Max (大屏)：布局利用空间合理
  - iPad (平板)：界面适配良好

- [ ] **不同 iOS 版本**
  - iOS 15.0：基本功能正常
  - iOS 16.0：功能正常
  - iOS 17.0：功能正常
  - iOS 18.0+：可能启用 Apple Intelligence

- [ ] **系统暗黑模式**
  - 切换系统暗黑模式
  - 应用深色背景保持一致
  - 文本对比度清晰

---

## 🔧 技术验证

### AI 模型层

- [ ] **模型加载**
  - 控制台显示模型加载日志
  - 无 error 日志（warning 可接受）
  - 模型选择逻辑正确

- [ ] **Vision 框架**
  - VNClassifyImageRequest 正常执行
  - VNCoreMLRequest（如果有自定义模型）正常
  - 异步处理不阻塞 UI

### 服务层

- [ ] **ObjectRecognitionService**
  - 图像转换（UIImage → CIImage）正常
  - 识别结果清理（cleanIdentifier）正确
  - 回调在主线程执行

- [ ] **TranslationService**
  - 35+ 物品翻译准确
  - 未知物品返回合理默认值
  - 语言列表完整（6 种语言）

- [ ] **SpeechService**
  - AVSpeechSynthesizer 初始化正常
  - 6 种语言的语音引擎都可用
  - 语速、音调设置合理

- [ ] **AIModelManager**
  - 优先级：Apple Intelligence > FastVLM > Vision
  - 缓存机制工作正常
  - 模型切换不影响识别

---

## 📊 测试场景

### 场景 1: 英语用户学习中文

**设置**：
- 母语：English
- 学习：中文

**测试步骤**：
1. [ ] 拍摄苹果 🍎
2. [ ] 学习卡片显示："苹果"
3. [ ] 母语卡片显示："Apple"
4. [ ] 点击学习卡片播放按钮，听到中文发音"píng guǒ"
5. [ ] 点击母语卡片播放按钮，听到英文发音"Apple"

### 场景 2: 中文用户学习日语

**设置**：
- 母语：中文
- 学习：日本語

**测试步骤**：
1. [ ] 拍摄书本 📖
2. [ ] 学习卡片显示："本"
3. [ ] 母语卡片显示："书"
4. [ ] 点击学习卡片播放按钮，听到日语发音"hon"
5. [ ] 点击母语卡片播放按钮，听到中文发音"shū"

### 场景 3: 西班牙语用户学习法语

**设置**：
- 母语：Español
- 学习：Français

**测试步骤**：
1. [ ] 拍摄杯子 ☕
2. [ ] 学习卡片显示："Tasse"
3. [ ] 母语卡片显示："Taza"
4. [ ] 两种语言发音都正确

---

## 🎨 UI/UX 检查

### 视觉设计

- [ ] **颜色主题**
  - 深蓝色背景（#0F172A, #1E2A4A, #243B6B）
  - 橙色学习卡片（#FF8C68, #FFB067）
  - 蓝色母语卡片（#6A80FF）
  - 青色高亮（#52E5FF）

- [ ] **圆角和阴影**
  - 所有卡片圆角 24-28px
  - 阴影柔和自然
  - 无锯齿或模糊

- [ ] **间距和对齐**
  - 元素间距一致
  - 左右边距对称
  - 文本对齐美观

- [ ] **字体和图标**
  - 中英文字体清晰
  - SF Symbols 图标正确显示
  - 大小层次分明

### 动画效果

- [ ] **按钮动画**
  - "开始识别"按钮按下有缩放
  - 播放按钮点击有反馈
  - 动画时长适中（0.15-0.2 秒）

- [ ] **页面转换**
  - 相机界面全屏展开流畅
  - 结果页面从底部滑出自然
  - 设置页面转换平滑

- [ ] **状态动画**
  - 加载进度圈旋转流畅
  - 播放按钮图标切换自然
  - 模型标签更新无闪烁

---

## 📱 真机特定测试（推荐）

### iPhone 特性

- [ ] **Face ID / Touch ID**
  - 应用前后台切换时无锁定
  - 隐私保护正常

- [ ] **真实相机**
  - 后置摄像头工作正常
  - 自动对焦功能
  - 闪光灯（如需要）

- [ ] **设备旋转**
  - 竖屏模式正常
  - 横屏模式（如果支持）

- [ ] **多任务**
  - 应用可以最小化
  - 从后台恢复正常
  - 相机权限保持

### iOS 18 特性（如果可用）

- [ ] **Apple Intelligence**
  - 主界面显示"Apple Intelligence"标签
  - 识别准确度提升
  - 识别速度更快

---

## 🚨 已知限制

### 模拟器限制
- ❌ 无法使用真实相机（但 UI 可以测试）
- ⚠️ 语音可能不播放（某些模拟器）
- ⚠️ 性能可能与真机不同

### 免费开发者账号限制
- ⚠️ 应用 7 天后需重新安装
- ⚠️ 同时只能 3 个应用
- ✅ 本应用所有功能都支持

### AI 识别限制
- ⚠️ 某些抽象物品识别率低
- ⚠️ 需要良好光线条件
- ⚠️ 背景复杂时准确度降低

---

## 📈 性能基准

### 预期性能指标

| 指标 | 目标值 | 备注 |
|-----|--------|------|
| 启动时间 | < 2 秒 | 冷启动 |
| 识别时间 | 1-3 秒 | 取决于模型 |
| 内存占用 | 30-80 MB | 正常范围 |
| 相机帧率 | 30 fps | 流畅预览 |
| 语音延迟 | < 0.5 秒 | 点击到播放 |

---

## ✅ 全部通过标准

当以下所有项都 ✅ 时，应用功能完整：

### 核心功能
- [x] 应用启动正常
- [x] AI 模型自动选择
- [x] 相机拍照工作
- [x] 物体识别准确
- [x] 翻译显示正确
- [x] 语音播放正常

### 用户体验
- [x] UI 美观现代
- [x] 动画流畅自然
- [x] 双语界面清晰
- [x] 导航直观易用

### 技术质量
- [x] 无崩溃
- [x] 无内存泄漏
- [x] 错误处理完善
- [x] 性能达标

---

## 📝 测试报告模板

```markdown
## 测试日期：____年__月__日

### 测试设备
- 设备：iPhone ___
- iOS 版本：___
- Xcode 版本：___

### 测试结果
- 启动：✅ / ❌
- 相机：✅ / ❌
- 识别：✅ / ❌
- 翻译：✅ / ❌
- 语音：✅ / ❌
- 设置：✅ / ❌

### 发现的问题
1. ___
2. ___

### 总体评价
[ ] 通过 - 可以发布
[ ] 需要修复 - 列出问题
```

---

## 🎊 准备就绪检查

在提交或分享应用前，确认：

- [ ] 所有核心功能测试通过
- [ ] 至少在 2 种设备尺寸上测试
- [ ] 至少测试 3 种不同物品识别
- [ ] 至少测试 2 种不同语言组合
- [ ] 无严重 bug 或崩溃
- [ ] 性能达到预期
- [ ] 用户体验流畅

---

**完成以上清单后，您的应用就可以投入使用了！** 🎉

如发现任何问题，请记录详细步骤和截图，以便后续改进。

